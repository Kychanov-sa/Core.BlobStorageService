# Core.BlobStorageService

–ü—Ä–æ—Å—Ç–æ–π —Å–µ—Ä–≤–∏—Å —Ö—Ä–∞–Ω–µ–Ω–∏—è BLOB –æ–±—ä–µ–∫—Ç–æ–≤.

## –û–±—â–µ–µ

Core.BlobStorageService - —ç—Ç–æ —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –≤–∏–¥–µ BLOB –æ–±—ä–µ–∫—Ç–æ–≤. –°–µ—Ä–≤–∏—Å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ API –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–ª–µ–¥—É—é—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:
 - –°–æ–∑–¥–∞–Ω–∏–µ BLOB –æ–±—ä–µ–∫—Ç–∞ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
 - –ü–µ—Ä–µ–∑–∞–ø–∏—Å—å BLOB –æ–±—ä–µ–∫—Ç–∞
 - –ß—Ç–µ–Ω–∏–µ BLOB –æ–±—ä–µ–∫—Ç–∞ –≤ –≤–∏–¥–µ —Ñ–∞–π–ª–∞ –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
 - –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–ø–∏–∏ BLOB –æ–±—ä–µ–∫—Ç–∞
 - –£–¥–∞–ª–µ–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è
 - –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ BLOB –æ–±—ä–µ–∫—Ç—É

–°–µ—Ä–≤–∏—Å –∏–º–µ–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞–Ω–∏–π –ø–æ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—é —Ö—Ä–∞–Ω–∏–ª–∏—â–∞:
 - —É–¥–∞–ª–µ–Ω–∏–µ –ø—É—Å—Ç—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
 - –æ—á–∏—Å—Ç–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã —Å —É–¥–∞–ª—ë–Ω–Ω—ã–º–∏ BLOB –æ–±—ä–µ–∫—Ç–∞–º–∏
 - —É–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö BLOB –æ–±—ä–µ–∫—Ç–æ–≤

 ## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

 - –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–ª—è BLOB –æ–±—ä–µ–∫—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–µ—Ä–≤–µ—Ä–∞


 ## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

 ### –°–±–æ—Ä–∫–∞ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤

 ```bash
 git clone https://github.com/Kychanov-sa/Core.BlobStorageService.git
 cd Core.BlobStorageService
 dotnet build ./src/Core.BlobStorageService/Core.BlobStorage.csproj
 ```

 ### –ü—É–±–ª–∏–∫–∞—Ü–∏—è

 ```bash
 git clone https://github.com/Kychanov-sa/Core.BlobStorageService.git
 cd Core.BlobStorageService
 dotnet publish ./src/Core.BlobStorageService/Core.BlobStorage.csproj --configuration Release --output ./build -p:PublishSingleFile=true
 ```

 ### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞

 ```bash
 dotnet run --project ./src/Core.BlobStorageService/
 ```

 ### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

 –°–µ—Ä–≤–∏—Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Ñ–∞–π–ª appsettings.json. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ —Å–µ–∫—Ü–∏–∏.

 #### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

 –°–µ–∫—Ü–∏—è ``StorageService`` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–µ —Ä–∞–±–æ—Ç—É —Ö—Ä–∞–Ω–∏–ª–∏—â–∞:
  - StorageId - –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ö—Ä–∞–Ω–∏–ª–∏—â–∞, –ø–∞—Ä–∞–º–µ—Ç—Ä —è–≤–ª—è–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º.
  - StorageMode - –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã —Ö—Ä–∞–Ω–∏–ª–∏—â–∞, –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é Persistent. –î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∑–Ω–∞—á–µ–Ω–∏–π:
    - Temporary - —Å–µ—Ä–≤–∏—Å –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ,
    - Persistent - —Å–µ—Ä–≤–∏—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è,
    - Archival - —Å–µ—Ä–≤–∏—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞—Ä—Ö–∏–≤–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è.
  - EnableEmptyDirectoriesTruncation - –í–∫–ª—é—á–µ–Ω–∏–µ —É—Å–µ—á–µ–Ω–∏—è –ø—É—Å—Ç—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π, –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é false.
  - TruncationSchedule - Cron-–≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–ø—É—Å–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø—É—Å—Ç—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π. –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 1 —Ä–∞–∑ –≤ –¥–µ–Ω—å –≤ 22:00.
  - EnableDeleteToRecycleBin - –í–∫–ª—é—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ—Ä–∑–∏–Ω—ã –¥–ª—è  —É–¥–∞–ª–µ–Ω–∏—è, –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é false.
  - RecyclingSchedule - Cron-–≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–ø—É—Å–∫–∞ –æ—á–∏—Å—Ç–∫–∏ –∫–æ—Ä–∑–∏–Ω—ã. –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 1 —Ä–∞–∑ –≤ –¥–µ–Ω—å –≤ 23:00.
  - EnableDeletionOfExpiredBlobs - –í–∫–ª—é—á–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è BLOB –æ–±—ä–µ–∫—Ç–æ–≤ —Å –∏—Å—Ç—ë–∫—à–∏–º —Å—Ä–æ–∫–æ–º, –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é false.
  - DeleteExpiredBlobsSchedule - Cron-–≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–ø—É—Å–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è BLOB –æ–±—ä–µ–∫—Ç–æ–≤ —Å –∏—Å—Ç—ë–∫—à–∏–º —Å—Ä–æ–∫–æ–º. –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 1 —Ä–∞–∑ –≤ –¥–µ–Ω—å –≤ 21:00.
  - BlobRetention - –í—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è BLOB'–æ–≤ –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ–º —Ö—Ä–∞–Ω–µ–Ω–∏–∏, –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "3:00:00:00" - 3 –¥–Ω—è.

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

 –°–µ–∫—Ü–∏—è ``FileStorage`` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–µ —Ä–∞–±–æ—Ç—É —Ö—Ä–∞–Ω–∏–ª–∏—â–∞:
  - StorageDirectory - –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è BLOB –æ–±—ä–µ–∫—Ç–æ–≤, –ø–∞—Ä–∞–º–µ—Ç—Ä —è–≤–ª—è–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º.
  - PartitionsCount - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑–¥–µ–ª–æ–≤ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –¥–æ–ø—É—Å–∫–∞—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ [128..1024], –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1024.
  - BlobMaxSizeBytes - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä BLOB'–æ–≤ –≤ –±–∞–π—Ç–∞—Ö, –¥–æ–ø—É—Å–∫–∞—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ [1–ö–±..2–ì–±], –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 4–ú–±.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞

```bash
‚îú‚îÄ üìÇ build/                       # –ü–∞–ø–∫–∞ –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å–±–æ—Ä–∫–∏
‚îÇ  ‚îú‚îÄ üìÑ Core.BlobStorage.exe      # API —Å–µ—Ä–≤–∏—Å
‚îÇ  ‚îî‚îÄ üìÑ Core.BlobStorage.Web.exe  # –í–µ–±-–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞
‚îú‚îÄ üìÇ docs/                        # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ üìÇ src/                         # –§–∞–π–ª—ã –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞
‚îÇ  ‚îú‚îÄ üìÅ Core.BlobStorageService/                 # –ü—Ä–æ–µ–∫—Ç API —Å–µ—Ä–≤–∏—Å–∞
‚îÇ  ‚îú‚îÄ üìÅ Core.BlobStorageService.AppHost/         # –ü—Ä–æ–µ–∫—Ç —Ö–æ—Å—Ç–∞ Aspire
‚îÇ  ‚îú‚îÄ üìÅ Core.BlobStorageService.ServiceDefaults/ # –ü—Ä–æ–µ–∫—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ  ‚îú‚îÄ üìÅ Core.BlobStorageService.ApiContracts/    # Shared-–ø—Ä–æ–µ–∫—Ç —Å transfer-–º–æ–¥–µ–ª—è–º–∏ –¥–ª—è API
‚îÇ  ‚îú‚îÄ üìÅ Core.BlobStorageService.RestClient/      # –ü—Ä–æ–µ–∫—Ç REST API –∫–ª–∏–µ–Ω—Ç–∞
‚îÇ  ‚îî‚îÄ üìÅ Core.BlobStorageService.Web/             # –ü—Ä–æ–µ–∫—Ç –≤–µ–±-–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞
‚îú‚îÄ üìÇ test—ã/                       # –ü—Ä–æ–µ–∫—Ç—ã —Ç–µ—Å—Ç–æ–≤
‚îÇ  ‚îî‚îÄ üìÅ Core.BlobStorageService.UnitTests/       # –ü—Ä–æ–µ–∫—Ç –º–æ–¥—É–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ —Å–µ—Ä–≤–∏—Å–∞ Core.BlobStorageService
‚îú‚îÄ üìÑ .gitignore                   # –°–ø–∏—Å–æ–∫ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–∏–Ω—è –¥–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è Git
‚îú‚îÄ üìÑ CHANGELOG.md                 # –ñ—É—Ä–Ω–∞–ª –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–µ—Ä–≤–∏—Å–∞ –ø–æ –≤–µ—Ä—Å–∏—è–º
‚îú‚îÄ üìÑ Core.BlobStorageService.sln  # –§–∞–π–ª —Ä–µ—à–µ–Ω–∏—è –¥–ª—è Visual Studio IDE
‚îú‚îÄ üìÑ Directory.Packages.props     # –§–∞–π–ª —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø–∞–∫–µ—Ç–æ–≤ –ø—Ä–æ–µ–∫—Ç–æ–≤
‚îú‚îÄ üìÉ LICENSE                      # –§–∞–π–ª –ª–∏—Ü–µ–Ω–∑–∏–∏
‚îú‚îÄ üìÉ README.md                    # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ üìÉ ROADMAP.md                   # –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞ —Ä–∞–∑–≤–∏—Ç–∏—è —Å–µ—Ä–≤–∏—Å–∞
‚îú‚îÄ üìÑ StyleCop.ruleset             # –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è StyleCop
‚îî‚îÄ üìÉ TECHSTACK.md                 # –û–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ —Å—Ç–µ–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

[license-img]: https://img.shields.io/:license-apache-blue.svg?style=flat-square
[license-url]: https://opensource.org/license/apache-2-0